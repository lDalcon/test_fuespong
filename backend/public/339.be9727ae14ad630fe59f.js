(self.webpackChunktest=self.webpackChunktest||[]).push([[339],{2339:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PagesModule:()=>nt});var o=i(8583),r=i(4655),c=i(8259),a=i.n(c),n=i(3679),s=i(2238),u=i(7716),l=i(2340),d=i(1841);const m=l.N.urlServices;let p=(()=>{class t{constructor(t){this.http=t}getToken(){return sessionStorage.getItem("token")||""}crearHistoria(t){return this.http.post(`${m}historia`,t,{headers:{"x-token":this.getToken()}})}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(d.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=i(3738),h=i(8295),g=i(9983),Z=i(1095);let k=(()=>{class t{constructor(t,e,i,o){var r;this.fb=t,this.dialogRef=e,this.data=i,this.historiaService=o,this.historiaForm=this.fb.group({hurnombre:["",[n.kI.required]],hurrole:["",[n.kI.required]],hurfuncionalidad:["",[n.kI.required]],hurbeneficio:["",[n.kI.required]],hurcriaceptacion:["",[n.kI.required]],hurcomentarios:["",[n.kI.required]],hurproid:[null===(r=i.proyecto)||void 0===r?void 0:r.proid,[n.kI.required]],hurusridcrea:[i.usrid,[n.kI.required]],ticnombre:["",[n.kI.required]],ticcomentarios:["",[n.kI.required]]})}ngOnInit(){}crearHistoria(){this.historiaService.crearHistoria(this.historiaForm.value).subscribe(t=>{a().fire("Felicidades",t.message,"success").finally(()=>{this.dialogRef.close()})})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(n.qu),u.Y36(s.so),u.Y36(s.WI),u.Y36(p))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-historia-usuario"]],decls:27,vars:2,consts:[[1,"historia-form"],["autocomplete","on",3,"formGroup"],["matInput","","type","text","formControlName","hurnombre","placeholder","Nombre"],["matInput","","type","text","formControlName","hurrole","placeholder","Role"],["matInput","","type","text","formControlName","hurfuncionalidad","placeholder","Funcionalidad"],["matInput","","type","text","formControlName","hurbeneficio","placeholder","Beneficio"],["matInput","","type","text","formControlName","hurcriaceptacion","placeholder","Criterio de aceptaci\xf3n"],["matInput","","type","text","formControlName","hurcomentarios","placeholder","Comentarios"],["matInput","","type","text","formControlName","ticnombre","placeholder","Nombre"],["matInput","","formControlName","ticcomentarios","placeholder","Comentarios"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(u.TgZ(0,"mat-card",0),u.TgZ(1,"mat-card-title"),u._uU(2,"Registrar Historia de Usuario"),u.qZA(),u._UZ(3,"mat-card-content"),u.TgZ(4,"form",1),u.TgZ(5,"mat-form-field"),u._UZ(6,"input",2),u.qZA(),u.TgZ(7,"mat-form-field"),u._UZ(8,"input",3),u.qZA(),u.TgZ(9,"mat-form-field"),u._UZ(10,"input",4),u.qZA(),u.TgZ(11,"mat-form-field"),u._UZ(12,"input",5),u.qZA(),u.TgZ(13,"mat-form-field"),u._UZ(14,"input",6),u.qZA(),u.TgZ(15,"mat-form-field"),u._UZ(16,"input",7),u.qZA(),u.TgZ(17,"mat-card"),u.TgZ(18,"p"),u._uU(19,"Informaci\xf3n Ticket"),u.qZA(),u.TgZ(20,"mat-form-field"),u._UZ(21,"input",8),u.qZA(),u.TgZ(22,"mat-form-field"),u._UZ(23,"textarea",9),u.qZA(),u.qZA(),u.qZA(),u.TgZ(24,"mat-card-actions"),u.TgZ(25,"button",10),u.NdJ("click",function(){return e.crearHistoria()}),u._uU(26,"Crear"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(4),u.Q6J("formGroup",e.historiaForm),u.xp6(21),u.Q6J("disabled",!e.historiaForm.valid))},directives:[f.a8,f.n5,f.dn,n._Y,n.JL,n.sg,h.KE,g.Nt,n.Fj,n.JJ,n.u,f.hq,Z.lW],styles:[".historia-form[_ngcontent-%COMP%]{width:90%;margin:auto;display:block}.historia-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block}"]}),t})();const T=l.N.urlServices;let q=(()=>{class t{constructor(t){this.http=t}getToken(){return sessionStorage.getItem("token")||""}crearTicket(t){return this.http.post(`${T}ticket`,t,{headers:{"x-token":this.getToken()}})}cancelarTicket(t){return this.http.put(`${T}ticket/cancelar`,t,{headers:{"x-token":this.getToken()}})}actualizarTicket(t){return this.http.put(`${T}ticket/${t.ticid}`,t,{headers:{"x-token":this.getToken()}})}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(d.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=i(7441),A=i(2458);function v(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"mat-card",1),u.TgZ(1,"mat-card-title"),u._uU(2,"Registrar Ticket"),u.qZA(),u._UZ(3,"mat-card-content"),u.TgZ(4,"form",2),u.TgZ(5,"mat-form-field"),u._UZ(6,"input",3),u.qZA(),u.TgZ(7,"mat-form-field"),u._UZ(8,"textarea",4),u.qZA(),u.qZA(),u.TgZ(9,"mat-card-actions"),u.TgZ(10,"button",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().crearTicket()}),u._uU(11,"Crear"),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(4),u.Q6J("formGroup",t.ticketForm),u.xp6(6),u.Q6J("disabled",!t.ticketForm.valid)}}function x(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"mat-card",1),u.TgZ(1,"mat-card-title"),u._uU(2,"Editar Ticket"),u.qZA(),u._UZ(3,"mat-card-content"),u.TgZ(4,"form",2),u.TgZ(5,"mat-form-field"),u._UZ(6,"input",3),u.qZA(),u.TgZ(7,"mat-form-field"),u._UZ(8,"textarea",4),u.qZA(),u.TgZ(9,"mat-form-field"),u.TgZ(10,"mat-select",6),u.TgZ(11,"mat-option",7),u._uU(12,"Activo"),u.qZA(),u.TgZ(13,"mat-option",7),u._uU(14,"En Proceso"),u.qZA(),u.TgZ(15,"mat-option",7),u._uU(16,"Finalizado"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"mat-card-actions"),u.TgZ(18,"button",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().editarTicket()}),u._uU(19,"Editar"),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(4),u.Q6J("formGroup",t.actTicketForm),u.xp6(7),u.Q6J("value",1),u.xp6(2),u.Q6J("value",2),u.xp6(2),u.Q6J("value",3),u.xp6(3),u.Q6J("disabled",!t.actTicketForm.valid)}}let I=(()=>{class t{constructor(t,e,i,o){var r,c,a,s;this.fb=t,this.dialogRef=e,this.data=i,this.ticketService=o,this.hurid=i.hurid,this.usrid=i.usrid,this.editar=i.editar,this.visualizar=i.visualizar,this.ticketForm=this.fb.group({ticnombre:["",[n.kI.required]],ticcomentarios:["",[n.kI.required]],tichurid:[this.hurid,[n.kI.required]],ticusridcrea:[this.usrid,[n.kI.required]]}),this.actTicketForm=this.fb.group({ticid:[null===(r=i.ticket)||void 0===r?void 0:r.ticid,[n.kI.required]],ticnombre:[null===(c=i.ticket)||void 0===c?void 0:c.ticnombre,[n.kI.required]],ticcomentarios:[null===(a=i.ticket)||void 0===a?void 0:a.ticcomentarios,[n.kI.required]],tichurid:[this.hurid,[n.kI.required]],ticusridmod:[this.usrid,[n.kI.required]],ticestado:[null===(s=i.ticket)||void 0===s?void 0:s.ticestado]})}ngOnInit(){}crearTicket(){console.log(this.ticketForm.value),this.ticketService.crearTicket(this.ticketForm.value).subscribe(t=>{console.debug(t),a().fire("Felicidades","Ticket creado","success"),this.dialogRef.close()},t=>console.debug(t))}editarTicket(){console.log(this.actTicketForm.value),this.ticketService.actualizarTicket(this.actTicketForm.value).subscribe(t=>{console.log(t),a().fire("Felicidades","Ticket actualizado","success").finally(()=>{this.dialogRef.close()})},t=>console.debug(t))}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(n.qu),u.Y36(s.so),u.Y36(s.WI),u.Y36(q))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-ticket"]],decls:2,vars:2,consts:[["class","ticket-form",4,"ngIf"],[1,"ticket-form"],["autocomplete","off",3,"formGroup"],["matInput","","type","text","formControlName","ticnombre","placeholder","Nombre"],["matInput","","formControlName","ticcomentarios","placeholder","Comentarios"],["mat-raised-button","","color","primary",3,"disabled","click"],["formControlName","ticestado"],[3,"value"]],template:function(t,e){1&t&&(u.YNc(0,v,12,2,"mat-card",0),u.YNc(1,x,20,5,"mat-card",0)),2&t&&(u.Q6J("ngIf",!e.editar),u.xp6(1),u.Q6J("ngIf",e.editar))},directives:[o.O5,f.a8,f.n5,f.dn,n._Y,n.JL,n.sg,h.KE,g.Nt,n.Fj,n.JJ,n.u,f.hq,Z.lW,b.gD,A.ey],styles:[".ticket-form[_ngcontent-%COMP%]{width:80%;margin:auto}.ticket-form[_ngcontent-%COMP%], .ticket-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block}"]}),t})();const _=l.N.urlServices;let y=(()=>{class t{constructor(t){this.http=t}getToken(){return sessionStorage.getItem("token")||""}getProyectos(t){return this.http.get(`${_}proyecto/${t}`,{headers:{"x-token":this.getToken()}})}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(d.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=i(5948),N=i(5939),U=i(6627),w=i(171),Y=i(2091),F=i(8341),J=i(1436);function S(t,e){1&t&&(u.TgZ(0,"th",15),u._uU(1," No. "),u.qZA())}function Q(t,e){if(1&t&&(u.TgZ(0,"td",16),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.ticid," ")}}function O(t,e){1&t&&(u.TgZ(0,"th",15),u._uU(1," Nombre "),u.qZA())}function z(t,e){if(1&t&&(u.TgZ(0,"td",16),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.ticnombre," ")}}function $(t,e){1&t&&(u.TgZ(0,"th",15),u._uU(1," Comentarios "),u.qZA())}function H(t,e){if(1&t&&(u.TgZ(0,"td",16),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.ticcomentarios," ")}}function M(t,e){1&t&&(u.TgZ(0,"th",15),u._uU(1," Fecha "),u.qZA())}function D(t,e){if(1&t&&(u.TgZ(0,"td",16),u._uU(1),u.ALo(2,"date"),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",u.lcZ(2,1,t.ticfechacrea)," ")}}function E(t,e){1&t&&(u.TgZ(0,"th",15),u._uU(1," Estado "),u.qZA())}function P(t,e){1&t&&(u.TgZ(0,"mat-chip",21),u._uU(1,"Activo"),u.qZA())}function R(t,e){1&t&&(u.TgZ(0,"mat-chip",22),u._uU(1,"En Proceso"),u.qZA())}function B(t,e){1&t&&(u.TgZ(0,"mat-chip",23),u._uU(1,"Finalizado"),u.qZA())}function j(t,e){1&t&&(u.TgZ(0,"mat-chip",24),u._uU(1,"Cancelado"),u.qZA())}function G(t,e){if(1&t&&(u.TgZ(0,"td",16),u.TgZ(1,"mat-chip-list"),u.YNc(2,P,2,0,"mat-chip",17),u.YNc(3,R,2,0,"mat-chip",18),u.YNc(4,B,2,0,"mat-chip",19),u.YNc(5,j,2,0,"mat-chip",20),u.qZA(),u.qZA()),2&t){const t=e.$implicit;u.xp6(2),u.Q6J("ngIf",1==t.ticestado),u.xp6(1),u.Q6J("ngIf",2==t.ticestado),u.xp6(1),u.Q6J("ngIf",3==t.ticestado),u.xp6(1),u.Q6J("ngIf",4==t.ticestado)}}function L(t,e){1&t&&(u.TgZ(0,"th",15),u._uU(1," Acciones "),u.qZA())}function X(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",27),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(3).editarTicket(e)}),u.TgZ(1,"mat-icon"),u._uU(2,"mode_edit"),u.qZA(),u.qZA()}}function W(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(3).cancelarTicket(e)}),u.TgZ(1,"mat-icon"),u._uU(2,"delete_forever"),u.qZA(),u.qZA()}}function K(t,e){if(1&t&&(u.TgZ(0,"td",16),u.YNc(1,X,3,0,"button",25),u.YNc(2,W,3,0,"button",26),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Q6J("ngIf",1==t.ticestado||2==t.ticestado),u.xp6(1),u.Q6J("ngIf",1==t.ticestado)}}function V(t,e){1&t&&u._UZ(0,"tr",29)}function tt(t,e){1&t&&u._UZ(0,"tr",30)}const et=function(){return[]};function it(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"mat-accordion"),u.TgZ(1,"mat-expansion-panel"),u.TgZ(2,"mat-expansion-panel-header"),u.TgZ(3,"mat-panel-title"),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"button",2),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw(2).crearTicket(e)}),u.TgZ(6,"mat-icon"),u._uU(7,"local_activity"),u.qZA(),u.qZA(),u.TgZ(8,"table",4),u.ynx(9,5),u.YNc(10,S,2,0,"th",6),u.YNc(11,Q,2,1,"td",7),u.BQk(),u.ynx(12,8),u.YNc(13,O,2,0,"th",6),u.YNc(14,z,2,1,"td",7),u.BQk(),u.ynx(15,9),u.YNc(16,$,2,0,"th",6),u.YNc(17,H,2,1,"td",7),u.BQk(),u.ynx(18,10),u.YNc(19,M,2,0,"th",6),u.YNc(20,D,3,3,"td",7),u.BQk(),u.ynx(21,11),u.YNc(22,E,2,0,"th",6),u.YNc(23,G,6,4,"td",7),u.BQk(),u.ynx(24,12),u.YNc(25,L,2,0,"th",6),u.YNc(26,K,3,2,"td",7),u.BQk(),u.YNc(27,V,1,0,"tr",13),u.YNc(28,tt,1,0,"tr",14),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit,i=u.oxw(2);u.xp6(4),u.AsE(" ","#"+t.hurid,": ",t.hurnombre," "),u.xp6(4),u.Q6J("dataSource",t.hurtickets||u.DdM(5,et)),u.xp6(19),u.Q6J("matHeaderRowDef",i.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",i.displayedColumns)}}function ot(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"mat-tab",1),u.TgZ(1,"button",2),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().crearHistoria(e)}),u.TgZ(2,"mat-icon"),u._uU(3,"post_add"),u.qZA(),u.qZA(),u.YNc(4,it,29,6,"mat-accordion",3),u.qZA()}if(2&t){const t=e.$implicit;u.s9C("label",t.pronombre),u.xp6(4),u.Q6J("ngForOf",t.prohistorias)}}const rt=[{path:"",children:[{path:"",redirectTo:"proyectos"},{path:"proyectos",component:(()=>{class t{constructor(t,e,i,o){this.proyectoService=t,this.usuarioService=e,this.dialog=i,this.ticketService=o,this.usuarioSesion=this.usuarioService.getUsuarioSesion(),this.proyectos=[],this.displayedColumns=["ticid","ticnombre","ticcomentarios","ticfechacrea","ticestado","accion"]}ngOnInit(){this.listarProyectos()}listarProyectos(){this.proyectoService.getProyectos(this.usuarioSesion.usrempid||"").subscribe(t=>{console.log(t),this.proyectos=t.proyectos},t=>console.warn(t))}crearTicket(t){this.dialog.open(I,{width:"80%",data:{hurid:t.hurid,usrid:this.usuarioSesion.usrid,editar:!1}}).afterClosed().subscribe(t=>{this.ngOnInit()})}editarTicket(t){this.dialog.open(I,{width:"80%",data:{hurid:t.tichurid,usrid:this.usuarioSesion.usrid,editar:!0,ticket:t}}).afterClosed().subscribe(t=>{this.ngOnInit()})}crearHistoria(t){this.dialog.open(k,{width:"80%",data:{usrid:this.usuarioSesion.usrid,visualizar:!1,proyecto:t}}).afterClosed().subscribe(t=>{this.ngOnInit()})}cancelarTicket(t){console.log(t),this.ticketService.cancelarTicket(t).subscribe(t=>{a().fire("Felicidades!",t.message,"success").finally(()=>{this.ngOnInit()})},t=>console.log(t))}visualizarTicket(t){this.dialog.open(I,{width:"80%",data:{hurid:t.tichurid,usrid:this.usuarioSesion.usrid,editar:!1,visualizar:!0,ticket:t}}).afterClosed().subscribe(t=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(y),u.Y36(C.i),u.Y36(s.uw),u.Y36(q))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-proyectos"]],decls:3,vars:1,consts:[[3,"label",4,"ngFor","ngForOf"],[3,"label"],["mat-button","",3,"click"],[4,"ngFor","ngForOf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","ticid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ticnombre"],["matColumnDef","ticcomentarios"],["matColumnDef","ticfechacrea"],["matColumnDef","ticestado"],["matColumnDef","accion",2,"text-align","center"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["selected","",4,"ngIf"],["color","accent","selected","",4,"ngIf"],["color","primary","selected","",4,"ngIf"],["color","warn","selected","",4,"ngIf"],["selected",""],["color","accent","selected",""],["color","primary","selected",""],["color","warn","selected",""],["mat-button","","matTooltip","Editar",3,"click",4,"ngIf"],["mat-button","","matTooltip","Cancelar","color","warn",3,"click",4,"ngIf"],["mat-button","","matTooltip","Editar",3,"click"],["mat-button","","matTooltip","Cancelar","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.TgZ(0,"mat-card"),u.TgZ(1,"mat-tab-group"),u.YNc(2,ot,5,2,"mat-tab",0),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngForOf",e.proyectos))},directives:[f.a8,N.SP,o.sg,N.uX,Z.lW,U.Hw,w.pp,w.ib,w.yz,w.yK,Y.BZ,Y.w1,Y.fO,Y.Dz,Y.as,Y.nj,Y.ge,Y.ev,F.qn,o.O5,F.HS,J.gM,Y.XQ,Y.Gk],pipes:[o.uU],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})()}]}];let ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.Bz.forChild(rt)],r.Bz]}),t})();var at=i(8667);let nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[o.ez,ct,at.q,n.UX]]}),t})()}}]);